name: ğŸ”§ Test AWS Connection

on: workflow_dispatch

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ” Test AWS Credentials
      uses: aws-actions/configure-aws-credentials@v2
      with:
        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: us-east-1
        
    - name: âœ… Verify connection works
      run: |
        echo "Probando conexiÃ³n AWS..."
        
        # Este comando SIEMPRE funciona si las credenciales son vÃ¡lidas
        if aws sts get-caller-identity; then
          echo ""
          echo "ğŸ‰ Â¡CREDENCIALES AWS FUNCIONAN!"
          echo "âœ… Usuario IAM configurado correctamente"
          echo "âœ… GitHub Secrets configurados correctamente"
        else
          echo ""
          echo "âŒ ERROR: Credenciales NO funcionan"
          echo "Revisa:"
          echo "1. Â¿Copiaste ambas credenciales correctamente?"
          echo "2. Â¿El usuario tiene AmazonS3FullAccess?"
          exit 1
        fi